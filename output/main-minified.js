!function(t){"use strict";function e(t){if(this.t=0,t instanceof ArrayBuffer)this.i=t,this.s=new DataView(this.i);else{if(!ArrayBuffer.isView(t))throw new Error("Invalid argument");this.i=t.buffer,this.s=new DataView(this.i,t.byteOffset,t.byteLength)}}function n(t,e,n){for(var i=0,s=0,r=n.length;s<r;s++)(i=n.charCodeAt(s))<128?t.setUint8(e++,i):(i<2048?t.setUint8(e++,192|i>>6):(i<55296||57344<=i?t.setUint8(e++,224|i>>12):(s++,i=65536+((1023&i)<<10|1023&n.charCodeAt(s)),t.setUint8(e++,240|i>>18),t.setUint8(e++,128|i>>12&63)),t.setUint8(e++,128|i>>6&63)),t.setUint8(e++,128|63&i))}e.prototype.g=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=this.v();return e},e.prototype.M=function(t){for(var e={},n=0;n<t;n++)e[this.v()]=this.v();return e},e.prototype.h=function(t){var e=function(t,e,n){for(var i="",s=0,r=e,o=e+n;r<o;r++){var a=t.getUint8(r);if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));65536<=(s=(7&a)<<18|(63&t.getUint8(++r))<<12|(63&t.getUint8(++r))<<6|(63&t.getUint8(++r))<<0)?(s-=65536,i+=String.fromCharCode(55296+(s>>>10),56320+(1023&s))):i+=String.fromCharCode(s)}else i+=String.fromCharCode((15&a)<<12|(63&t.getUint8(++r))<<6|(63&t.getUint8(++r))<<0);else i+=String.fromCharCode((31&a)<<6|63&t.getUint8(++r));else i+=String.fromCharCode(a)}return i}(this.s,this.t,t);return this.t+=t,e},e.prototype.l=function(t){var e=this.i.slice(this.t,this.t+t);return this.t+=t,e},e.prototype.v=function(){var t,e=this.s.getUint8(this.t++),n=0,i=0,s=0,r=0;if(e<192)return e<128?e:e<144?this.M(15&e):e<160?this.g(15&e):this.h(31&e);if(223<e)return-1*(255-e+1);switch(e){case 192:return null;case 194:return!1;case 195:return!0;case 196:return n=this.s.getUint8(this.t),this.t+=1,this.l(n);case 197:return n=this.s.getUint16(this.t),this.t+=2,this.l(n);case 198:return n=this.s.getUint32(this.t),this.t+=4,this.l(n);case 199:return n=this.s.getUint8(this.t),i=this.s.getInt8(this.t+1),this.t+=2,[i,this.l(n)];case 200:return n=this.s.getUint16(this.t),i=this.s.getInt8(this.t+2),this.t+=3,[i,this.l(n)];case 201:return n=this.s.getUint32(this.t),i=this.s.getInt8(this.t+4),this.t+=5,[i,this.l(n)];case 202:return t=this.s.getFloat32(this.t),this.t+=4,t;case 203:return t=this.s.getFloat64(this.t),this.t+=8,t;case 204:return t=this.s.getUint8(this.t),this.t+=1,t;case 205:return t=this.s.getUint16(this.t),this.t+=2,t;case 206:return t=this.s.getUint32(this.t),this.t+=4,t;case 207:return s=this.s.getUint32(this.t)*Math.pow(2,32),r=this.s.getUint32(this.t+4),this.t+=8,s+r;case 208:return t=this.s.getInt8(this.t),this.t+=1,t;case 209:return t=this.s.getInt16(this.t),this.t+=2,t;case 210:return t=this.s.getInt32(this.t),this.t+=4,t;case 211:return s=this.s.getInt32(this.t)*Math.pow(2,32),r=this.s.getUint32(this.t+4),this.t+=8,s+r;case 212:return i=this.s.getInt8(this.t),this.t+=1,0===i?void(this.t+=1):[i,this.l(1)];case 213:return i=this.s.getInt8(this.t),this.t+=1,[i,this.l(2)];case 214:return i=this.s.getInt8(this.t),this.t+=1,[i,this.l(4)];case 215:return i=this.s.getInt8(this.t),this.t+=1,0===i?(s=this.s.getInt32(this.t)*Math.pow(2,32),r=this.s.getUint32(this.t+4),this.t+=8,new Date(s+r)):[i,this.l(8)];case 216:return i=this.s.getInt8(this.t),this.t+=1,[i,this.l(16)];case 217:return n=this.s.getUint8(this.t),this.t+=1,this.h(n);case 218:return n=this.s.getUint16(this.t),this.t+=2,this.h(n);case 219:return n=this.s.getUint32(this.t),this.t+=4,this.h(n);case 220:return n=this.s.getUint16(this.t),this.t+=2,this.g(n);case 221:return n=this.s.getUint32(this.t),this.t+=4,this.g(n);case 222:return n=this.s.getUint16(this.t),this.t+=2,this.M(n);case 223:return n=this.s.getUint32(this.t),this.t+=4,this.M(n)}throw new Error("Could not parse")};const i=function(t){var e=[],i=[],s=function t(e,n,i){var s=typeof i,r=0,o=0,a=0,c=0,l=0,u=0;if("string"===s){if((l=function(t){for(var e=0,n=0,i=0,s=t.length;i<s;i++)(e=t.charCodeAt(i))<128?n+=1:e<2048?n+=2:e<55296||57344<=e?n+=3:(i++,n+=4);return n}(i))<32)e.push(160|l),u=1;else if(l<256)e.push(217,l),u=2;else if(l<65536)e.push(218,l>>8,l),u=3;else{if(!(l<4294967296))throw new Error("String too long");e.push(219,l>>24,l>>16,l>>8,l),u=5}return n.push({h:i,u:l,t:e.length}),u+l}if("number"===s)return Math.floor(i)===i&&isFinite(i)?0<=i?i<128?(e.push(i),1):i<256?(e.push(204,i),2):i<65536?(e.push(205,i>>8,i),3):i<4294967296?(e.push(206,i>>24,i>>16,i>>8,i),5):(a=i/Math.pow(2,32)>>0,c=i>>>0,e.push(207,a>>24,a>>16,a>>8,a,c>>24,c>>16,c>>8,c),9):-32<=i?(e.push(i),1):-128<=i?(e.push(208,i),2):-32768<=i?(e.push(209,i>>8,i),3):-2147483648<=i?(e.push(210,i>>24,i>>16,i>>8,i),5):(a=Math.floor(i/Math.pow(2,32)),c=i>>>0,e.push(211,a>>24,a>>16,a>>8,a,c>>24,c>>16,c>>8,c),9):(e.push(203),n.push({o:i,u:8,t:e.length}),9);if("object"===s){if(null===i)return e.push(192),1;if(Array.isArray(i)){if((l=i.length)<16)e.push(144|l),u=1;else if(l<65536)e.push(220,l>>8,l),u=3;else{if(!(l<4294967296))throw new Error("Array too large");e.push(221,l>>24,l>>16,l>>8,l),u=5}for(r=0;r<l;r++)u+=t(e,n,i[r]);return u}if(i instanceof Date){var h=i.getTime();return a=Math.floor(h/Math.pow(2,32)),c=h>>>0,e.push(215,0,a>>24,a>>16,a>>8,a,c>>24,c>>16,c>>8,c),10}if(i instanceof ArrayBuffer){if((l=i.byteLength)<256)e.push(196,l),u=2;else if(l<65536)e.push(197,l>>8,l),u=3;else{if(!(l<4294967296))throw new Error("Buffer too large");e.push(198,l>>24,l>>16,l>>8,l),u=5}return n.push({l:i,u:l,t:e.length}),u+l}if("function"==typeof i.toJSON)return t(e,n,i.toJSON());var f=[],d="",p=Object.keys(i);for(r=0,o=p.length;r<o;r++)"function"!=typeof i[d=p[r]]&&f.push(d);if((l=f.length)<16)e.push(128|l),u=1;else if(l<65536)e.push(222,l>>8,l),u=3;else{if(!(l<4294967296))throw new Error("Object too large");e.push(223,l>>24,l>>16,l>>8,l),u=5}for(r=0;r<l;r++)u+=t(e,n,d=f[r]),u+=t(e,n,i[d]);return u}if("boolean"===s)return e.push(i?195:194),1;if("undefined"===s)return e.push(212,0,0),3;throw new Error("Could not encode")}(e,i,t),r=new ArrayBuffer(s),o=new DataView(r),a=0,c=0,l=-1;0<i.length&&(l=i[0].t);for(var u,h=0,f=0,d=0,p=e.length;d<p;d++)if(o.setUint8(c+d,e[d]),d+1===l){if(h=(u=i[a]).u,f=c+l,u.l)for(var g=new Uint8Array(u.l),y=0;y<h;y++)o.setUint8(f+y,g[y]);else u.h?n(o,f,u.h):void 0!==u.o&&o.setFloat64(f,u.o);c+=h,i[++a]&&(l=i[a].t)}let _=Array.from(new Uint8Array(r));return _.unshift(4),new Uint8Array(_).buffer},s=function(t){var n=new e(t=t.slice(1)),i=n.v();if(n.t===t.byteLength)return i;throw new Error(t.byteLength-n.t+" trailing bytes")},r=new Int32Array(2);new Float32Array(r.buffer),new Float64Array(r.buffer);const o={9:"HANDSHAKE",10:"JOIN_ROOM",11:"ERROR",12:"LEAVE_ROOM",13:"ROOM_DATA",14:"ROOM_STATE",15:"ROOM_STATE_PATCH",16:"ROOM_DATA_SCHEMA",HANDSHAKE:9,JOIN_ROOM:10,ERROR:11,LEAVE_ROOM:12,ROOM_DATA:13,ROOM_STATE:14,ROOM_STATE_PATCH:15,ROOM_DATA_SCHEMA:16},a=new Int32Array(2),c=new Float32Array(a.buffer),l=new Float64Array(a.buffer),u={int8:function(t,e){return u.uint8(t,e)<<24>>24},uint8:function(t,e){return t[e.offset++]},int16:function(t,e){return u.uint16(t,e)<<16>>16},uint16:function(t,e){return t[e.offset++]|t[e.offset++]<<8},int32:function(t,e){return t[e.offset++]|t[e.offset++]<<8|t[e.offset++]<<16|t[e.offset++]<<24},uint32:function(t,e){return u.int32(t,e)>>>0},float32:function(t,e){return u.readFloat32(t,e)},float64:function(t,e){return u.readFloat64(t,e)},int64:function(t,e){var n=u.uint32(t,e);return u.int32(t,e)*Math.pow(2,32)+n},uint64:function(t,e){var n=u.uint32(t,e);return u.uint32(t,e)*Math.pow(2,32)+n},readFloat32:function(t,e){return a[0]=u.int32(t,e),c[0]},readFloat64:function(t,e){return a[0]=u.int32(t,e),a[1]=u.int32(t,e),l[0]},boolean:function(t,e){return u.uint8(t,e)>0},string:function(t,e){var n,i=t[e.offset++];i<192?n=31&i:217===i?n=u.uint8(t,e):218===i?n=u.uint16(t,e):219===i&&(n=u.uint32(t,e));var s=((t,e,n)=>{for(var i="",s=0,r=e,o=e+n;r<o;r++){var a=t[r];0!=(128&a)?192!=(224&a)?224!=(240&a)?240!=(248&a)?console.error("Invalid byte "+a.toString(16)):(s=(7&a)<<18|(63&t[++r])<<12|(63&t[++r])<<6|(63&t[++r])<<0)>=65536?(s-=65536,i+=String.fromCharCode(55296+(s>>>10),56320+(1023&s))):i+=String.fromCharCode(s):i+=String.fromCharCode((15&a)<<12|(63&t[++r])<<6|(63&t[++r])<<0):i+=String.fromCharCode((31&a)<<6|63&t[++r]):i+=String.fromCharCode(a)}return i})(t,e.offset,n);return e.offset+=n,s},stringCheck:function(t,e){var n=t[e.offset];return n<192&&n>160||217===n||218===n||219===n},number:function(t,e){var n=t[e.offset++];return n<128?n:202===n?u.readFloat32(t,e):203===n?u.readFloat64(t,e):204===n?u.uint8(t,e):205===n?u.uint16(t,e):206===n?u.uint32(t,e):207===n?u.uint64(t,e):208===n?u.int8(t,e):209===n?u.int16(t,e):210===n?u.int32(t,e):211===n?u.int64(t,e):n>223?-1*(255-n+1):void 0},numberCheck:function(t,e){var n=t[e.offset];return n<128||n>=202&&n<=211},arrayCheck:function(t,e){return t[e.offset]<160},switchStructureCheck:function(t,e){return t[e.offset-1]===SWITCH_TO_STRUCTURE&&(t[e.offset]<128||t[e.offset]>=202&&t[e.offset]<=211)}},h=function(t,e){if(this._offset=e,t instanceof ArrayBuffer)this._buffer=t,this._view=new DataView(this._buffer);else{if(!ArrayBuffer.isView(t))throw new Error("Invalid argument");this._buffer=t.buffer,this._view=new DataView(this._buffer,t.byteOffset,t.byteLength)}};h.prototype._array=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=this._parse();return e},h.prototype._map=function(t){for(var e={},n=0;n<t;n++)e[this._parse()]=this._parse();return e},h.prototype._str=function(t){var e=((t,e,n)=>{for(var i="",s=0,r=e,o=e+n;r<o;r++){var a=t.getUint8(r);if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(s=(7&a)<<18|(63&t.getUint8(++r))<<12|(63&t.getUint8(++r))<<6|(63&t.getUint8(++r))<<0)>=65536?(s-=65536,i+=String.fromCharCode(55296+(s>>>10),56320+(1023&s))):i+=String.fromCharCode(s)}else i+=String.fromCharCode((15&a)<<12|(63&t.getUint8(++r))<<6|(63&t.getUint8(++r))<<0);else i+=String.fromCharCode((31&a)<<6|63&t.getUint8(++r));else i+=String.fromCharCode(a)}return i})(this._view,this._offset,t);return this._offset+=t,e},h.prototype._bin=function(t){var e=this._buffer.slice(this._offset,this._offset+t);return this._offset+=t,e},h.prototype._parse=function(){var t,e=this._view.getUint8(this._offset++),n=0,i=0,s=0,r=0;if(e<192)return e<128?e:e<144?this._map(15&e):e<160?this._array(15&e):this._str(31&e);if(e>223)return-1*(255-e+1);switch(e){case 192:return null;case 194:return!1;case 195:return!0;case 196:return n=this._view.getUint8(this._offset),this._offset+=1,this._bin(n);case 197:return n=this._view.getUint16(this._offset),this._offset+=2,this._bin(n);case 198:return n=this._view.getUint32(this._offset),this._offset+=4,this._bin(n);case 199:return n=this._view.getUint8(this._offset),i=this._view.getInt8(this._offset+1),this._offset+=2,[i,this._bin(n)];case 200:return n=this._view.getUint16(this._offset),i=this._view.getInt8(this._offset+2),this._offset+=3,[i,this._bin(n)];case 201:return n=this._view.getUint32(this._offset),i=this._view.getInt8(this._offset+4),this._offset+=5,[i,this._bin(n)];case 202:return t=this._view.getFloat32(this._offset),this._offset+=4,t;case 203:return t=this._view.getFloat64(this._offset),this._offset+=8,t;case 204:return t=this._view.getUint8(this._offset),this._offset+=1,t;case 205:return t=this._view.getUint16(this._offset),this._offset+=2,t;case 206:return t=this._view.getUint32(this._offset),this._offset+=4,t;case 207:return s=this._view.getUint32(this._offset)*Math.pow(2,32),r=this._view.getUint32(this._offset+4),this._offset+=8,s+r;case 208:return t=this._view.getInt8(this._offset),this._offset+=1,t;case 209:return t=this._view.getInt16(this._offset),this._offset+=2,t;case 210:return t=this._view.getInt32(this._offset),this._offset+=4,t;case 211:return s=this._view.getInt32(this._offset)*Math.pow(2,32),r=this._view.getUint32(this._offset+4),this._offset+=8,s+r;case 212:return i=this._view.getInt8(this._offset),this._offset+=1,0===i?void(this._offset+=1):[i,this._bin(1)];case 213:return i=this._view.getInt8(this._offset),this._offset+=1,[i,this._bin(2)];case 214:return i=this._view.getInt8(this._offset),this._offset+=1,[i,this._bin(4)];case 215:return i=this._view.getInt8(this._offset),this._offset+=1,0===i?(s=this._view.getInt32(this._offset)*Math.pow(2,32),r=this._view.getUint32(this._offset+4),this._offset+=8,new Date(s+r)):[i,this._bin(8)];case 216:return i=this._view.getInt8(this._offset),this._offset+=1,[i,this._bin(16)];case 217:return n=this._view.getUint8(this._offset),this._offset+=1,this._str(n);case 218:return n=this._view.getUint16(this._offset),this._offset+=2,this._str(n);case 219:return n=this._view.getUint32(this._offset),this._offset+=4,this._str(n);case 220:return n=this._view.getUint16(this._offset),this._offset+=2,this._array(n);case 221:return n=this._view.getUint32(this._offset),this._offset+=4,this._array(n);case 222:return n=this._view.getUint16(this._offset),this._offset+=2,this._map(n);case 223:return n=this._view.getUint32(this._offset),this._offset+=4,this._map(n)}throw new Error("Could not parse")};const f=t=>{const e=Array.from(new Uint8Array(t)),n=e[0],i=o[n];if(n===o.ROOM_DATA){const n={offset:1};return{type:u.stringCheck(e,n)?u.string(e,n):u.number(e,n),message:e.length>n.offset?((t,e)=>{void 0===e&&(e=0);var n=new h(t,e),i=n._parse();if(n._offset!==t.byteLength)throw new Error(t.byteLength-n._offset+" trailing bytes");return i})(t,n.offset):null}}return{type:i,message:null}},d=()=>g.ws,p=new EventTarget,g={ws:null},y=(t,e,n="blueboat_SEND_MESSAGE",s=g.ROOM)=>{const r={type:2,data:[n,{room:s,key:t,data:e}],options:{compress:!0},nsp:"/"};d().send(i(r))};function _(t,e){const n=new CustomEvent(t,{detail:e});p.dispatchEvent(n)}const w=t=>{if("Blockly"in window)return m(t);const e=s(t.data);if(console.warn(e),"object"!=typeof e)return;if("3"===e.toString()&&setTimeout((()=>y("PLAYER_LEADERBOARD_REQUESTED")),500),2!==e.type)return;const{data:n,key:i}=e.data[1];switch(i){case"UPDATED_PLAYER_LEADERBOARD":g.PLAYER_LEADERBOARD=n.terms;break;case"PLAYER_JOINS_STATIC_STATE":g.GAME_STATE=n,_("GAME_STATE");break;case"IMPOSTER_MODE_PEOPLE":case"LAVA_RESULTS":case"DEFENDING_HOMEBASE_STATUS":case"AVAILABLE_HOMEBASE_UPGRADES":case"AVAILABLE_LAVA_UPGRADES":g[i]=n;break;default:if(!n||!n?.type)return;g.ROOM=e.data[0].slice(8),g[n.type]=n.value}},m=t=>{const e=f(t.data);switch(e.type){case"AUTH_ID":_("AUTH_ID",e.message);break;case"MESSAGE_FOR_DEVICE":_("MESSAGE_FOR_DEVICE",e.message)}},v=WebSocket.prototype.send;WebSocket.prototype.send=function(t){return console.warn("[S]",t),g.ws=this,this.removeEventListener("message",w),this.addEventListener("message",w),"Blockly"in window?(t=>{const e=f(t);"MOVED"===e.type&&_("MOVED",e.message),d().send(t)})(t):v.apply(this,arguments)};const E=t=>new Promise((e=>setTimeout(e,t))),b=()=>"g_"+Date.now().toString(32)+"_"+Math.floor(1e4*Math.random()).toString(32),A=t=>Array.from({length:t},b),S=function(t){const e=t??O(),n=I(e.answers),i=C();if("text"===e.type)return{index:-1,type:"input",text:n.text,choice:n,element:null};for(const t of i){const e=t.textContent,s=t.getElementsByTagName("img")[0]?.src??"";if((n.text||"")===e&&(n.image||"")===s)return{index:i?.indexOf(t),type:"text",text:n.text??"",choice:n,element:t}}return{type:null}},I=function(t){for(const e of t??[])if(e.correct){let t="text";return e.text||(t="image"),e.type=t,e}return{type:null}},C=function(){return Array.from(document.querySelector(".sc-hKFoFe")?.children??[])},O=function(){const t=g.GAME_QUESTIONS,e=k();if(!e||!t)return{type:null};let n=[];for(const i of t)e.img===i.image&&e.text===i.text&&n.push(i);for(const t of n){const e=S(t);if(e?.type)return t}return{type:null}},k=function(){const t=document.querySelector(".notranslate.lang-en")||document.querySelector("img[alt=Question]");if(t){return{img:document.querySelector("img[alt=Question]")?.src??"",text:t.textContent}}return{type:null}},U=()=>{const t=g.GAME_QUESTIONS?.[$["Auto Answer Config"].elements["Question Index"].value]||g.GAME_QUESTIONS?.[0];y("QUESTION_ANSWERED",{questionId:t._id,answer:I(t.answers)._id})},$={Answers:{type:"header"},"Auto Answer":{type:"toggle",value:!1,keybindId:"classic_auto_answer",action:async function(){U(),await E($["Auto Answer Config"].elements.Delay.value),this.value&&this.action.bind(this)()}},"Auto Answer Config":{type:"collapse",elements:{Delay:{type:"slider",interval:[500,250,2500],value:1500,numSuffix:"ms",colors:{red:20,orange:20,lime:60}},"Question Index":{type:"slider",interval:[0,1,4],value:0},"Success Rate":{type:"slider",interval:[0,5,100],value:100,numSuffix:"%"}}},"Answer Correctly Once":{type:"button",action:U},"Highlight Answer":{type:"toggle",value:!1,action:async function(){const t=S();if(t&&"text"===t?.type&&t.index){const e=C()?.[t.index];e&&(e.children[0].style.background="dodgerblue",e.children[0].style.color="black")}await E(250),this.value?this.action.bind(this)():C()?.forEach((t=>{t.children[0].style.background="",t.children[0].style.color=""}))}},"Hidden Answer":{type:"toggle",value:!1,action:async function(){const t=S();"text"===t?.type&&t.index?document.title=`${t.index+1}lay Gimkit! - Enter game code here | Gimkit`:document.title="Play Gimkit! - Enter game code here | Gimkit",await E(250),this.value?this.action.bind(this)():document.title="Play Gimkit! - Enter game code here | Gimkit"}},"Input Answer":{type:"toggle",value:!1,action:async function(){const t=S(),e=document.getElementsByTagName("form")[0]?.children[0]??{};if("input"===t?.type&&e&&(e.placeholder=t.text),await E(250),this.value)this.action.bind(this)();else{(document.getElementsByTagName("form")[0]?.children[0]??{}).placeholder="Enter answer here..."}}},Upgrades:{type:"header"},"Auto Upgrade":{type:"toggle",value:!1,action:async function(){function t(t,e){y("UPGRADE_PURCHASED",{upgradeName:t,level:e})}let e=g.BALANCE??0;const n=g.PERSONAL_ACTIVE_POWERUPS?.includes("discount")?.75:1,i=$["Auto Upgrade Config"].elements["Money Per Question"].value,s=$["Auto Upgrade Config"].elements.Multiplier.value,r=$["Auto Upgrade Config"].elements["Streak Bonus"].value,o=$["Auto Upgrade Config"].elements.Insurance.value;if(i){const i=g.GAME_STATE.upgrades[0].levels,s=g.UPGRADE_LEVELS.moneyPerQuestion,r=(i[s]?.price??1/0)*n*(g.UPGRADE_PRICING_DISCOUNT??1);e>=r&&(t("Money Per Question",s+1),e-=r)}if(s){const i=g.GAME_STATE.upgrades[1].levels,s=g.UPGRADE_LEVELS.multiplier,r=(i[s]?.price??1/0)*n*(g.UPGRADE_PRICING_DISCOUNT??1);e>=r&&(t("Multiplier",s+1),e-=r)}if(r){const i=g.GAME_STATE.upgrades[2].levels,s=g.UPGRADE_LEVELS.streakBonus,r=(i[s]?.price??1/0)*n*(g.UPGRADE_PRICING_DISCOUNT??1);e>=r&&(t("Streak Bonus",s+1),e-=r)}if(o){const i=g.GAME_STATE.upgrades[3].levels,s=g.UPGRADE_LEVELS.insurance,r=(i[s]?.price??1/0)*n*(g.UPGRADE_PRICING_DISCOUNT??1);e>=r&&(t("Insurance",s+1),e-=r)}await E(500),this.value&&this.action.bind(this)()}},"Auto Upgrade Config":{type:"collapse",elements:{"Money Per Question":{type:"toggle",value:!0},Multiplier:{type:"toggle",value:!0},"Streak Bonus":{type:"toggle",value:!0},Insurance:{type:"toggle",value:!1}}}};const M={Answers:$.Answers,"Auto Answer":{type:"toggle",value:!1,action:async function(){"questionStatus"===g.PARDY_MODE_STATE?.[0].value.key&&"ask"===g.PARDY_MODE_STATE[0].value.value&&(await E(M["Auto Answer Config"].elements.Delay.value),U(),await E(500)),await E(10),this.value&&this.action.bind(this)()}},"Auto Answer Config":{type:"collapse",elements:{Delay:{type:"slider",interval:[0,250,2500],value:0,numSuffix:"ms",colors:{orange:50,lime:50}},"Question Index":$["Auto Answer Config"].elements["Question Index"],"Success Rate":$["Auto Answer Config"].elements["Success Rate"]}},"Answer Correctly Once":$["Answer Correctly Once"],"Highlight Answer":$["Highlight Answer"],"Hidden Answer":$["Hidden Answer"],"Input Answer":$["Input Answer"]},x=JSON.parse(localStorage.getItem("g_keybinds")||"{}"),R=new EventTarget;function T(t,e){const n=new CustomEvent(t,{detail:e});R.dispatchEvent(n)}const D=()=>localStorage.setItem("g_keybinds",JSON.stringify(x));window.addEventListener("keydown",(t=>{const e=pt(),n=x[e];for(const[i,s]of Object.entries(n))if(t.key===s){T("KEYBIND",{keybindId:i,key:t.key,mode:e});break}}));const[L,P,N,G,H,B,V,F,q,K,Q,j,z,Y]=A(14),W={keybind:t=>{const e=document.createElement("span");return e.className=K,e.setAttribute("keybind",t.keybindId??""),e.setAttribute("keybind-key",t.key??""),e.textContent=t.key&&t.keybindId?t.key:"[ ]",e.addEventListener("click",(n=>{et.bindingKey||(e.textContent="...",et.bindingKey=!0,et.boundKey=n=>{(t=>{const e=pt();x[e]&&(delete x[e][t],D())})(t.keybindId),((t,e)=>{const n=pt();x[n]||(x[n]={}),x[n][t]=e,D()})(t.keybindId,n),t.key=n,e.textContent=n,e.setAttribute("keybind-key",n),et.bindingKey=!1,et.boundKey=t=>{}},setTimeout((()=>{et.bindingKey=!1,e.textContent=t.key&&t.keybindId?t.key:"[ ]",et.boundKey=t=>{}}),1e3))})),e},toggle:(t,e)=>{const n=document.createElement("div");n.className=`${L} ${P} `+(e.value?N:G),n.setAttribute("keybind",e.keybindId??"");const i=document.createElement("span");return i.textContent=t,t.length>21&&(i.style.fontSize="17px"),n.appendChild(i),e.keybindId&&n.appendChild(W.keybind(e)),n},button:(t,e)=>{const n=document.createElement("div");n.className=`${L} ${Q}`,n.setAttribute("keybind",e.keybindId??"");const i=document.createElement("span");return i.textContent=t,t.length>21&&(i.style.fontSize="17px"),n.appendChild(i),e.keybindId&&n.appendChild(W.keybind(e)),n},slider:(t,e)=>{const n=document.createElement("div");n.className=`${L} ${Y}`;const i=document.createElement("span");i.textContent=`${t}: ${e.value}${e.numSuffix||""}`;const s=document.createElement("input");if(s.type="range",s.className=b(),s.min=e.interval[0].toString(),s.step=e.interval[1].toString(),s.max=e.interval[2].toString(),s.value=e.value.toString(),n.appendChild(i),n.appendChild(s),e.colors){const t=document.createElement("style");let i="linear-gradient(90deg",r=0;for(const[t,n]of Object.entries(e.colors))r&&(i+=`, ${t} ${r}%`),i+=`, ${t} ${n+r}%`,r+=n;t.innerHTML=`#${J} .${s.className}::-moz-range-track {background: ${i}) !important;}`,n.appendChild(t)}return n},nav:()=>{if(document.querySelector(`#${J}`))return document.querySelector(`#${J}`);const t=document.createElement("div");return t.id=J,t.style.display="none",document.body.appendChild(t),t},style:()=>{if(document.querySelector(`style#${Z}`))return;const t=document.createElement("style");t.id=Z,t.innerHTML=` @import url('https://fonts.googleapis.com/css2?family=Baloo+2&display=swap'); @import url('https://fonts.googleapis.com/css2?family=Righteous&display=swap');\n  #${J} {position: fixed;width: 280px;height: 500px;background: #00000090;font-family: 'Baloo 2', cursive;border-radius: 3px;font-size: 19px;user-select: none;overflow-y: scroll;-ms-overflow-style: none;scrollbar-width: none;overscroll-behavior-y: none;z-index: 99999;}\n  #${J}::-webkit-scrollbar {display: none;}\n  #${J} .${H}, #${J} .${L}, #${J} .${V} {display: block;width: 100%;height: 40px;line-height: 40px;color: white;}\n  #${J} .${Q}.${G} {cursor:not-allowed !important;}\n  #${J} .${Q}.${G} span {color:#444 !important;}\n  #${J} span.${H} {text-align: center;border-bottom-style: solid;border-bottom-width: 3px;animation: 7s infinite rainbowBC, 7s infinite rainbowC;}\n  #${J} .${L} {position: relative;transition: 0.3s background;}\n  #${J} .${L} span:first-child {color: white;transition: 0.2s color;padding-left: 20px;}\n  #${J} .${V} {transition: 0.3s height;}\n  #${J} .${V}:not(.${j}) {overflow-y: hidden;height: 40px;}\n  #${J} .${V}.${j} {height: auto;}\n  #${J} .${L}.${P}.${G} span:first-child {color: #f00a;}\n  #${J} .${L}.${P}.${N} span:first-child {color: #1f0e;}\n  #${J} .${L}:hover, #${J} .${V}:hover {background: #ffffff20;cursor: pointer;}\n  #${J} .${B}:hover {cursor: move;}\n  #${J} .${L} span.${K} {position: absolute;display: block;right: 0px;top: 0px;width: 40px;color: white;background: #ffffff10;text-align: center;margin-right: 7px;}\n  #${J} .${L} span.${K}[keybind-key=""] {color: #00000050;}\n  #${J} .${V} span.${q} {display: inline-block;width: 40px;text-align: center;transition: 0.2s transform;font-family: 'Righteous', cursive;}\n  #${J} .${V}.${j} span.${q} {transform: rotate(90deg);}\n  .${z} {position: absolute;right: 12px;top: 7px;opacity: 0.25;transition: 0.2s opacity;}\n  .${z}:hover {opacity: 0.5;cursor: pointer;}\n  .${z}.${N} {opacity: 1;}\n  #${J} .${Y} {height: 60px;}\n  #${J} .${Y} span {position: absolute;top: 8px;line-height: initial;}\n  #${J} .${Y} input {position: absolute;top: 28px;width: calc(100% - 40px);left: 20px;background: transparent;}\n  #${J} .${Y} input[type="range"]::-moz-range-thumb {height: 17px;width: 8px;border: none;border-radius: 0px;background: #9736FF;cursor: col-resize;}\n  #${J} .${Y} input[type="range"]::-moz-range-track {height: 2.4px;border: none;background: white;border-radius: 0px;}\n  #${J} #${X} {position:absolute;left:0;top:0;width:100%;z-index:100000;background:#000d;}\n  @keyframes rainbowBC {\n    0% { border-color: red; }\n    18% { border-color: orange; }\n    36% { border-color: yellow; }\n    54% { border-color: lime; }\n    72% { border-color: dodgerblue; }\n    90% { border-color: violet; }\n    100% { border-color: red; }\n  }\n  @keyframes rainbowC {\n    0% { color: red; }\n    18% { color: orange; }\n    36% { color: yellow; }\n    54% { color: lime; }\n    72% { color: dodgerblue; }\n    90% { color: violet; }\n    100% { color: red; }\n  }`,document.head.appendChild(t)},elements:(t,e=!1,n,i)=>{const s=[];for(const[r,o]of Object.entries(t))switch(o.type){case"header":{const t=document.createElement("span");if(t.className=`${H} ${B}`,e)t.textContent=r;else{t.innerHTML=`${r}<svg class="${z}" fill="#8e3bff" width="24px" height="24px" viewBox="0 0 1920 1920" xmlns="http://www.w3.org/2000/svg" stroke="#8e3bff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M1154.976 0 988.342 166.52c-60.448 60.447-63.436 153.418-15.4 220.646L670.359 689.751c-4.022 4.022-6.55 8.964-9.079 13.79-147.212-61.022-328.671-34.246-444.626 81.709l-98.027 98.141 418.31 418.195-520.129 520.129c-22.41 22.409-22.41 58.724 0 81.248 11.262 11.147 25.972 16.778 40.682 16.778s29.42-5.63 40.567-16.778l520.128-520.129 418.195 418.31 98.142-98.142c75.962-75.847 117.793-176.862 117.793-284.313 0-56.195-12.067-110.208-33.787-160.198 2.758-1.839 5.861-2.988 8.275-5.516l303.963-303.964c29.19 21.145 63.896 33.097 100.67 33.097 46.083 0 89.293-17.928 121.93-50.565L1920 764.909 1154.976 0Z" fill-rule="evenodd"></path> </g></svg>`;const n=t.querySelector("svg");n.addEventListener("click",(t=>{n.classList.toggle(N),et.pinned=!et.pinned})),e=!0}t.addEventListener("mousedown",lt),s.push(t);break}case"toggle":{const t=W.toggle(r,o);t.addEventListener("click",(e=>{if(!e.target?.classList.contains("key")){if(t.classList.toggle(N),t.classList.toggle(G),n&&i){const t=n[i].elements[r];t.value=!t.value}else o.value=!o.value;o.action?.()}})),s.push(t);break}case"button":{const t=W.button(r,o),e=function(t){t.target?.classList.contains("key")||o.action()};let n=null;o.condition&&setInterval((()=>{const i=o.condition?.();i!==n&&(n=i,t.removeEventListener("click",e),i?(t.classList.remove(G),t.addEventListener("click",e)):t.classList.add(G))}),1e3),t.addEventListener("click",e),s.push(t);break}case"collapse":{const n=document.createElement("div");n.className=`${V} ${F}`;const i=document.createElement("span");i.className=`${q} ${F}`,i.textContent=">";const a=document.createElement("span");a.className=F,a.textContent=r,r.length>21&&(a.style.fontSize="17px");const c=document.createElement("div");n.appendChild(i),n.appendChild(a),n.appendChild(c);const l=W.elements(o.elements,e,t,r);for(const t of l)c.appendChild(t);n.addEventListener("click",(t=>{t.target?.classList.contains(F)&&n.classList.toggle(j)})),s.push(n);break}case"slider":{const t=W.slider(r,o);t.querySelector("input").addEventListener("input",(e=>{const n=e.target;o.value=parseInt(n.value),t.querySelector("span").textContent=`${r}: ${o.value}${o.numSuffix||""}`})),s.push(t);break}}return s}},[J,X,Z]=A(3),tt=[0,0,0,0,!1],et={pinned:!1,bindingKey:!1,boundKey:t=>{}};let nt=1,it=0,st=0,rt={};const ot=t=>{rt=t,W.style();const e=W.nav();e.innerHTML="";const n=W.elements(t);for(const t of n)e.appendChild(t)},at=t=>{nt=Math.round(10*t)/10,W.nav().style.transform=`scale(${nt})`,it=Math.abs((280-W.nav().offsetWidth)/2),st=Math.abs((500-W.nav().offsetHeight)/2),ct()},ct=()=>{const t=W.nav();window.innerWidth-it<parseInt(t.style.left)+t.offsetWidth&&(t.style.left=""),t.style.right=-1*it+"px",window.innerHeight-st<parseInt(t.style.top)+t.offsetHeight&&(t.style.top=""),t.style.bottom=-1*st+"px"},lt=t=>{tt[2]=t.clientX,tt[3]=t.clientY,tt[4]=!0};window.addEventListener("mousedown",(t=>{Array.from(W.nav().querySelectorAll("*")).includes(t.target)||(et.pinned||(W.nav().style.display="none",et.bindingKey=!1),ut())})),window.addEventListener("resize",ct),window.addEventListener("mouseup",(()=>{tt[4]=!1})),window.addEventListener("mousemove",(t=>{if(!tt[4])return;tt[0]=tt[2]-t.clientX,tt[1]=tt[3]-t.clientY,tt[2]=t.clientX,tt[3]=t.clientY;const e=W.nav();e.style.top=Math.max(-1*st,e.offsetTop-tt[1])+"px",e.style.left=Math.max(-1*it,e.offsetLeft-tt[0])+"px",ct()})),window.addEventListener("contextmenu",(t=>{const e=W.nav();e.style.display="",e.style.left=Math.min(window.innerWidth-e.offsetWidth,t.x-it)+"px",e.style.top=Math.min(window.innerHeight-e.offsetHeight,t.y-st)+"px",ct(),t.preventDefault()})),window.addEventListener("keydown",(t=>{""===W.nav().style.display&&("-"===t.key&&at(Math.max(.5,nt-.1)),"="===t.key&&at(Math.min(1,nt+.1)),et.bindingKey&&(["Escape","Backspace"].includes(t.key)?et.bindingKey=!1:et.boundKey(t.key)));const e=x[t.key];if(e){function n(t){if("toggle"===t.type){if(t.keybindId===e)return t.value=!t.value,t.action?.(),!0}else if("button"===t.type&&t.keybindId===e)return t.action?.(),!0}t:for(const i of Object.values(rt))if("collapse"===i.type){for(const s of Object.values(i.elements))if(n(s))break t}else if(n(i))break t}}));const ut=()=>{document.querySelector(`#${X}`)?.remove()};function ht(t,e){const n=(()=>{if(document.querySelector(`#${X}`))return document.querySelector(`#${X}`);const t=document.createElement("div");return t.id=X,t.style.minHeight=document.querySelector(`#${J}`).scrollHeight+"px",document.querySelector(`#${J}`)?.appendChild(t),document.querySelector(`#${J}`)?.scrollTo(0,0),t})();for(const[i,s]of Object.entries(t)){const t=W.button(i,s);t.addEventListener("click",(()=>{e(s._id),ut()})),n.appendChild(t)}}const ft=async(t,e)=>{e?(g.IMPOSTER_MODE_PEOPLE||(y("IMPOSTER_MODE_REQUEST_PEOPLE"),await E(500)),ht(Object.fromEntries(g.IMPOSTER_MODE_PEOPLE?.filter((t=>!t.votedOff)).map((t=>[t.name,{type:"button",action:()=>{},_id:t.id}]))??[]),(e=>{e&&y("IMPOSTER_MODE_PURCHASE",{item:t,on:e})}))):y("IMPOSTER_MODE_PURCHASE",{item:t})},dt={Answers:$.Answers,"Auto Answer":$["Auto Answer"],"Auto Answer Config":$["Auto Answer Config"],"Answer Correctly Once":$["Answer Correctly Once"],"Highlight Answer":$["Highlight Answer"],"Hidden Answer":$["Hidden Answer"],"Input Answer":$["Input Answer"],Imposter:{type:"header"},"Reveal Imposters":{type:"toggle",value:!1,action:()=>{}},"Purchase Item":{type:"collapse",elements:{"Private Investigation (7)":{type:"button",condition:()=>"detective"===g.IMPOSTER_MODE_PERSON?.role,action:()=>{ft("privateInvestigation",!0)}},"Public Investigation (15)":{type:"button",condition:()=>"detective"===g.IMPOSTER_MODE_PERSON?.role,action:()=>{ft("publicInvestigation",!0)}},"Note Look (7)":{type:"button",condition:()=>"detective"===g.IMPOSTER_MODE_PERSON?.role,action:()=>{ft("noteViewer",!0)}},"Meeting (10)":{type:"button",condition:()=>"detective"===g.IMPOSTER_MODE_PERSON?.role,action:()=>{ft("meeting")}},"Investigation Remover (10)":{type:"button",condition:()=>"imposter"===g.IMPOSTER_MODE_PERSON?.role,action:()=>{ft("investigationRemover")}},"Fake Investigation (6)":{type:"button",condition:()=>"imposter"===g.IMPOSTER_MODE_PERSON?.role,action:()=>{ft("fakeInvestigation",!0)}},"Unclear (15)":{type:"button",condition:()=>"imposter"===g.IMPOSTER_MODE_PERSON?.role,action:()=>{ft("clearListRemover",!0)}},"Disguise (15)":{type:"button",condition:()=>"imposter"===g.IMPOSTER_MODE_PERSON?.role,action:()=>{ft("blendIn")}}}},"Spam Host":{type:"toggle",value:!1,action:()=>{}}},pt=()=>g.GAME_STATE.gameOptions.specialGameType[0];window.addEventListener("load",(t=>{ot($)})),window.decode=s,window.encode=i,window.classic=$,window.default={Default:{type:"header"}},window.pardy=M,window.imposter=dt,window.wsdata=g,window.render=ot,p.addEventListener("GAME_STATE",(t=>{switch(t.detail,pt()){case"CLASSIC":default:ot($);break;case"PARDY":ot(M);break;case"IMPOSTER":ot(dt)}})),R.addEventListener("KEYBIND",(t=>{t.detail})),setInterval((()=>{Array.from(document.body.children??[]).forEach((t=>{t.id!==J&&(t.style.zIndex="10")}))}),200),t.mode=pt}({});
